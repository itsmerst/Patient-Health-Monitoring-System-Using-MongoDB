<!DOCTYPE html>
<html lang="zxx">

<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<head>
    <title>PHMS: Doctor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8" />
    <meta name="keywords" content="PHMS: Doctor" />
    <script>
        addEventListener("load", function () {
            setTimeout(hideURLbar, 0);
        }, false);

        function hideURLbar() {
            window.scrollTo(0, 1);
        }
    </script>
    <!-- Custom Theme files -->
    <link href="css/bootstrap.css" type="text/css" rel="stylesheet" media="all">
    <link href="css/style.css" type="text/css" rel="stylesheet" media="all">
	<link rel="stylesheet" href="css/chocolat.css" type="text/css" media="screen"><!-- //Gallery Css -->
    <!-- font-awesome icons -->
    <link href="css/fontawesome-all.min.css" rel="stylesheet">
    <!-- //Custom Theme files -->
	 <!-- online-fonts -->
	<link href="http://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Montserrat:200,300,400,500,600,700,800,900" rel="stylesheet"><!-- //online-fonts -->
</head>
<body>
<script src="../../../../../../../m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>
<script>
(function(){
	if(typeof _bsa !== 'undefined' && _bsa) {
  		// format, zoneKey, segment:value, options
  		_bsa.init('flexbar', 'CKYI627U', 'placement:w3layoutscom');
  	}
})();
</script>
<script>
(function(){
if(typeof _bsa !== 'undefined' && _bsa) {
	// format, zoneKey, segment:value, options
	_bsa.init('fancybar', 'CKYDL2JN', 'placement:demo');
}
})();
</script>
<script>
(function(){
	if(typeof _bsa !== 'undefined' && _bsa) {
  		// format, zoneKey, segment:value, options
  		_bsa.init('stickybox', 'CKYI653J', 'placement:w3layoutscom');
  	}
})();
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src='https://www.googletagmanager.com/gtag/js?id=G-98H8KRKT85'></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-98H8KRKT85');
</script>

<meta name="robots" content="noindex">
<body><link rel="stylesheet" href="../../../../../../assests/css/font-awesome.min.css">
<!-- New toolbar-->
<style>
* {
  box-sizing: border-box;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
}


#w3lDemoBar.w3l-demo-bar {
  top: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
  padding: 40px 5px;
  padding-top:70px;
  margin-bottom: 70px;
  background: #0D1326;
  border-top-left-radius: 9px;
  border-bottom-left-radius: 9px;
}

#w3lDemoBar.w3l-demo-bar a {
  display: block;
  color: #e6ebff;
  text-decoration: none;
  line-height: 24px;
  opacity: .6;
  margin-bottom: 20px;
  text-align: center;
}

#w3lDemoBar.w3l-demo-bar span.w3l-icon {
  display: block;
}

#w3lDemoBar.w3l-demo-bar a:hover {
  opacity: 1;
}

#w3lDemoBar.w3l-demo-bar .w3l-icon svg {
  color: #e6ebff;
}
#w3lDemoBar.w3l-demo-bar .responsive-icons {
  margin-top: 30px;
  border-top: 1px solid #41414d;
  padding-top: 40px;
}
#w3lDemoBar.w3l-demo-bar .demo-btns {
  border-top: 1px solid #41414d;
  padding-top: 30px;
}
#w3lDemoBar.w3l-demo-bar .responsive-icons a span.fa {
  font-size: 26px;
}
#w3lDemoBar.w3l-demo-bar .no-margin-bottom{
  margin-bottom:0;
}
.toggle-right-sidebar span {
  background: #0D1326;
  width: 50px;
  height: 50px;
  line-height: 50px;
  text-align: center;
  color: #e6ebff;
  border-radius: 50px;
  font-size: 26px;
  cursor: pointer;
  opacity: .5;
}
.pull-right {
  float: right;
  position: fixed;
  right: 0px;
  top: 70px;
  width: 90px;
  z-index: 99999;
  text-align: center;
}


.hide-right-bar-notifications {
  margin-right: -300px !important;
  -webkit-transition: all .3s ease-in-out;
  -moz-transition: all .3s ease-in-out;
  -o-transition: all .3s ease-in-out;
  transition: all .3s ease-in-out;
}

/* View Record Modal */
#view-record-modal .modal-body table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

#view-record-modal .modal-body th,
#view-record-modal .modal-body td {
  padding: 8px;
  border: 1px solid #ddd;
  text-align: left;
}

#view-record-modal .modal-body th {
  background-color: #f2f2f2;
}

/* View Appointments Modal */
#view-appointments-modal .modal-body table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

#view-appointments-modal .modal-body th,
#view-appointments-modal .modal-body td {
  padding: 8px;
  border: 1px solid #ddd;
  text-align: left;
}

#view-appointments-modal .modal-body th {
  background-color: #f2f2f2;
}



@media (max-width: 992px) {
  #w3lDemoBar.w3l-demo-bar a.desktop-mode{
      display: none;

  }
}
@media (max-width: 767px) {
  #w3lDemoBar.w3l-demo-bar a.tablet-mode{
      display: none;

  }
}
@media (max-width: 568px) {
  #w3lDemoBar.w3l-demo-bar a.mobile-mode{
      display: none;
  }
  #w3lDemoBar.w3l-demo-bar .responsive-icons {
      margin-top: 0px;
      border-top: none;
      padding-top: 0px;
  }
  #right-sidebar,.pull-right {
      width: 90px;
  }
  #w3lDemoBar.w3l-demo-bar .no-margin-bottom-mobile{
      margin-bottom: 0;
  }
}
</style>


       
    </div>
    <div class="right-sidebar-panel-content animated fadeInRight" tabindex="5003"
        style="overflow: hidden; outline: none;">
    </div>
</div>
</div>
</div>

        <!-- header -->
        <header>
            <nav class="navbar navbar-expand-lg navbar-light bg-gradient-secondary">
                <h1>
                    <a class="navbar-brand text-white" href="/">
                       PHMS <!--Using Cloud-->
                    </a>
                </h1>
                <button class="navbar-toggler ml-md-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ml-lg-auto text-center">
                        
                        <li>
                            <button type="button" class="btn  ml-lg-2 w3ls-btn" data-toggle="modal" aria-pressed="false" data-target="#exampleModal" onclick="logout()">
                                Logout
                            </button>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
 <!-- main image slider container -->
        
    <!-- end of main image slider container -->
	<!-- breadcrumbs -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="/">Home</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">Gallery</li>
        </ol>
    </nav>
    <!-- //breadcrumbs -->
	<!---728x90--->

	<!--Gallery-->
	<section class="gallery  py-lg-5">
    <div class="container py-4">
     <div class="text-center wthree-title pb-sm-5 pb-3">
      <h3 class="w3l-sub">Doctor's Login</h3>
      <h4 class="sub-title py-3">Welcome, <%= doctorName %></h4> <!-- Updated line -->
      <!-- <h4 class="sub-title py-3">Donec consequat sapien ut leo cursus rhoncus.</h4> -->
    </div>
			<!---728x90--->
            <div class="row">
                <div class="col-md-2">
                  <div class="sidebar">
                    <div class="logo">
                      <h4><a href="/">PHMS</a></h4>
                    </div>
                    <nav class="navbar bg-light">
                      <ul class="navbar-nav">
                        <li class="nav-item active">
                          <a class="nav-link" href="#">Dashboard</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="#view-record-modal" data-toggle="modal">View Reports</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="#add-prescription-modal" data-toggle="modal">Add Prescription</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="#view-appointments-modal" data-toggle="modal">View Appointments</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="#" onclick="logout()">Logout</a>
                        </li>
                      </ul>
                    </nav>
                  </div>
                </div>
                <div class="col-md-10">
                  <div class="row">
                    <div class="col-md-4 mb-3">
                      <div class="card">
                        <a href="#view-record-modal" data-toggle="modal" data-target="#view-record-modal">
                          <img src="images/g1.jpg" class="card-img-top" alt="Patient Health History">
                          <div class="card-body">
                            <h4 class="card-title">View Reports</h4>
                          </div>
                        </a>
                      </div>
                    </div>
                    <div class="col-md-4 mb-3">
                      <div class="card">
                        <a href="#view-appointments-modal" data-toggle="modal" data-target="#view-appointments-modal">
                          <img src="images/g4.jpg" class="card-img-top" alt="View Appointments">
                          <div class="card-body">
                            <h4 class="card-title">View Appointments</h4>
                          </div>
                        </a>
                      </div>
                    </div>
                    <div class="col-md-4 mb-3">
                      <div class="card">
                        <a href="#add-prescription-modal" data-toggle="modal" data-target="#add-prescription-modal">
                          <img src="images/g7.jpg" class="card-img-top" alt="Patient's Record">
                          <div class="card-body">
                            <h4 class="card-title">Add Prescriptions</h4>
                          </div>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
        
              
              <!-- View Record Modal -->
              <div class="modal fade" id="view-record-modal" tabindex="-1" role="dialog" aria-labelledby="view-record-modalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="view-record-form-modalLabel">View Patient Health History</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form id="view-record-form">
        <div class="modal-body">
          <div class="form-group">
            <label for="patient-name-input" class="col-form-label">Patient Name:</label>
            <select class="form-control" id="patient-name-input" required>
              <!-- Placeholder option -->
              <option value="">Select Patient Name</option>
              <!-- Iterate over the patients array and generate options for patients -->
              <% for(var i = 0; i < patients.length; i++) { %>
                <option value="<%= patients[i] %>"><%= patients[i] %></option>
              <% } %>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">View Health History</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </form>
    </div>
  </div>
</div>

              
              
              
              
              <!-- View Appointments Modal -->
              <div class="modal fade" id="view-appointments-modal" tabindex="-1" role="dialog" aria-labelledby="view-appointments-modalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="view-appointments-modalLabel">Patient Appointments</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <h6>Patient Name: <span id="appointment-patient-name"></span></h6>
                      <table class="table table-bordered">
                        <thead>
                          <tr>
                            <th>Appointment Date</th>
                            <th>Patient Name</th>
                          </tr>
                        </thead>
                        <tbody>
                          <% for (var i = 0; i < appointments.length; i++) { %>
                            <tr>
                              <td><%= appointments[i].appdate.split('T')[0] %></td>
                              <td>
                                <% for (var j = 0; j < users.length; j++) {
                                    if (users[j].docname === doctorName) { %>
                                      <%= users[j].name %>
                                    <% }
                                } %>
                              </td>
                            </tr>
                          <% } %>
                          
                          
                          
                        </tbody>
                      </table>
                      
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <button type="button" class="btn btn-primary" id="view-appointments-btn">View Appointments</button>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Add Prescription Modal -->
              <div class="modal fade" id="add-prescription-modal" tabindex="-1" role="dialog" aria-labelledby="add-prescription-modalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="add-prescription-modalLabel">Add Prescription</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form>
                        <label for="patient-name-input" class="col-form-label">Patient Name:</label>
                        <select class="form-control" id="patient-name-input" required>
                          <!-- Placeholder option -->
                          <option value="">Select Patient Name</option>
                          <!-- Iterate over the users array and generate options for patients -->
                          <% users.filter(user => user.role === 'patient').forEach(function(user) { %>
                            <option value="<%= user.name %>"><%= user.name %></option>
                          <% }) %>
                        </select>
              
                        <div class="form-group">
                          <label for="medicines">Medicines:</label>
                          <textarea class="form-control" id="medicines"></textarea>
                        </div>
                        <div class="form-group">
                          <label for="notes">Notes:</label>
                          <textarea class="form-control" id="notes"></textarea>
                        </div>
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <button type="button" class="btn btn-primary" id="save-prescription-btn">Save changes</button>
                    </div>
                  </div>
                </div>
              </div>
              
        

            
			</div>
		</div>
	</section>
	<!--//Gallery-->
<!---728x90--->
<!-- footer -->
<footer class="py-sm-5">
    <div class="container">
        <div class="row py-5">
            <!-- footer grid1 -->
            <div class="col-lg-3 col-sm-6 fv5-contact">
                <h2 class="mb-4">Contact Us</h2>
                <div class="fv3-contact mt-3">
                
                    <span class="fas fa-home mr-2"></span>
                    <p>ZCOER, Narhe.</p>
                </div>
                <div class="fv3-contact mt-3">
                    <span class="fas fa-phone-volume mr-2"></span>
                    <p>+91 123456789</p>
                </div>
                <div class="fv3-contact mt-3">
                    <span class="fas fa-envelope-open mr-2"></span>
                    <a href="mailto:example@email.com" class="text-secondary">group24@example.com</a>
                </div>
            </div>
            <!-- //footer grid1 -->
            <!-- footer grid2 -->
            
            <!-- //footer grid2 -->
            <!-- footer grid3 -->
            <div class="col-lg-3  col-sm-6 footv3-left text-lg-center my-lg-0 mt-sm-5 mt-5">
                <h3 class="mb-4">Navigation</h3>
                <ul class="list-agileits">
                    <li>
                        <a href="index.html">
                            Home
                        </a>
                    </li>
                    
                    <li>
                        <a href="contact.html">
                            Contact Us
                        </a>
                    </li>
                </ul>
            </div>
            <!-- //footer grid3 -->
            <!-- footer grid4  -->
            <div class="col-lg-3  col-sm-6 footv3-left my-lg-0 mt-5">
                <h3 class="mb-4">Get more Details</h3>
                <form action="#" method="post">
                    <div class="form-group">
                        <input type="email" class="form-control  bg-dark border-0" id="email" placeholder="Enter email" name="email" required>
                    </div>
                    <div class="form-group">
                        <input type="Submit" class="form-control bg-secondary text-white border-0" id="sub" value="submit" name="sub">
                    </div>
                </form>
            </div>
            <!-- //footer grid4 -->
        </div>
        <div class="cpy-right text-center  pt-3">
            
            <div class="copyrightbottom">
                <p class="text-secondary">Â© BE IT Group 24 2023. All rights reserved.
                </p>
            </div>
            <div class="copyrighttop">
                <ul>
                    <li>
                        <h4>Follow us on:</h4>
                    </li>
                    <li>
                        <a class="facebook" href="#">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                    </li>
                    <li>
                        <a class="facebook" href="#">
                            <i class="fab fa-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a class="facebook" href="#">
                            <i class="fab fa-google-plus-g"></i>
                        </a>
                    </li>
                    <li>
                        <a class="facebook" href="#">
                            <i class="fab fa-pinterest-p"></i>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
    <!-- //footer container -->
</footer>
<!-- //footer -->

<script>
  // Fetch the patient names and populate the select element
  function fetchPatientNames() {
    // Make a GET request to the server to retrieve patient names
    fetch('/api/registrationForm?role=patient')
      .then(response => response.json())
      .then(data => {
        const selectElement = document.getElementById('patient-name-input');
        selectElement.innerHTML = ''; // Clear existing options

        // Create and append an option element for each patient name
        data.forEach(patient => {
          const option = document.createElement('option');
          option.value = patient.name;
          option.textContent = patient.name;
          selectElement.appendChild(option);
        });
      })
      .catch(error => {
        console.error('Error fetching patient names:', error);
      });
  }

  // Call fetchPatientNames function to populate the select element
  fetchPatientNames();
</script>

<!--Paiten Appointment-->

    <!-- //footer -->
    <!-- js -->
    <script src="js/jquery-2.2.3.min.js"></script>
    <!-- //js -->
	  <!--gallery -->
	<script src="js/jquery.chocolat.js"></script>
	<!--light-box-files -->
	<script type="text/javascript">
		$(function () {
			$('.gallery-grid1 a').Chocolat();
		});
	</script>
	<!-- //gallery -->

  <script>
  $(document).ready(function () {
    // Fetch patient names and populate the dropdown
    $.get("/api/registrationForm", function (data) {
      var select = $("#patient-name-input");
      select.empty(); // Clear existing options

      // Populate dropdown with patient names
      data.forEach(function (patientName) {
        var option = $("<option>").val(patientName).text(patientName);
        select.append(option);
      });
    });

    // Handle form submission
    $("#view-record-form").submit(function (event) {
      event.preventDefault();

      // Get selected patient name
      var patientName = $("#patient-name-input").val();

      // Perform further actions with the selected patient name
      // ...

      // Close the modal
      $("#view-record-modal").modal("hide");
    });
  });
</script>


<!--Prescription Add-->
<script>
 document.getElementById("save-prescription-btn").addEventListener("click", function(event) {
  event.preventDefault(); // Prevent form submission

  // Get the selected patient name and prescription details from the form
  var selectedPatient = document.getElementById("patient-name-input").value;
  var medicines = document.getElementById("medicines").value;
  var notes = document.getElementById("notes").value;

  // Create an object to hold the prescription details
  var prescription = {
    patientName: selectedPatient,
    prescription: medicines,
    notes: notes
  };

  // Make a GET request to find the user ID based on the patient name
  fetch(`/api/registrationForm?role=patient&_=${Date.now()}`)
    .then(function(response) {
      if (response.ok) {
        return response.json();
      } else {
        throw new Error('Error finding user ID');
      }
    })
    .then(function(users) {
      // Find the user with the selected patient name
      var user = users.find(function(user) {
        return user.name === selectedPatient;
      });

      if (user) {
        var userId = user._id;

        // Make a PUT request to update the user's prescription
        return fetch(`/api/registrationForm/${userId}`, {
          method: 'PUT',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(prescription)
        });
      } else {
        throw new Error('User not found');
      }
    })
    .then(function(response) {
      // Handle the response from the server
      if (response.ok) {
        // Prescription saved successfully
        alert("Prescription saved successfully");
      } else {
        // Error occurred while saving the prescription
        alert("Error saving the prescription");
      }
    })
    .catch(function(error) {
      // Error occurred while making the request or handling the response
      console.log("Error:", error);
    });
});


</script>
    <!-- //end-smooth-scrolling -->
    <!-- smooth-scrolling-of-move-up -->
    <script>
        $(document).ready(function () {
            

            $().UItoTop({
                easingType: 'easeOutQuart'
            });

        });
    </script>
    <script>
      function logout() {
          // Redirect to home
          window.location.href = "/";
      }
      </script>
    <script src="js/SmoothScroll.min.js"></script>
    <!-- //smooth-scrolling-of-move-up -->
    <!-- Bootstrap core JavaScript
================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/bootstrap.js"></script>

</body>

</html>